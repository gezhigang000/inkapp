# 质取AI知识创作工具 — 操作界面布局说明

## 整体布局

```
┌──────────────────────────────────────────────────────────┐
│                    窗口 1200 × 800                        │
├──────────┬───────────────────────────────────────────────┤
│          │                                               │
│  侧边栏   │              内容区域                          │
│  w=224px │              flex-1                           │
│          │              overflow-auto                    │
│  ┌─────┐ │                                               │
│  │ Logo│ │                                               │
│  │质取AI│ │                                               │
│  └─────┘ │                                               │
│          │                                               │
│  🏠 首页  │                                               │
│  ✏️ 创作  │                                               │
│  🤖 模型  │                                               │
│  📄 文章  │                                               │
│  ⚙️ 设置  │                                               │
│          │                                               │
│          │                                               │
│ bg-gray  │                                               │
│ -900     │                                               │
└──────────┴───────────────────────────────────────────────┘
```

- 侧边栏固定宽度 224px，深色背景 (gray-900)
- 顶部显示品牌 Logo + "质取AI" 文字
- 5 个导航项，当前页蓝色高亮 (blue-600)
- 内容区域可滚动，白色/浅灰背景

---

## 页面一：首页 (Dashboard)

```
┌─────────────────────────────────────┐
│  首页                                │
│                                     │
│  欢迎使用质取AI知识创作工具            │
│                                     │
│  （后续可扩展：最近文章、快捷操作等）    │
└─────────────────────────────────────┘
```

当前为简单欢迎页，预留扩展空间。

---

## 页面二：创作 (Create)

```
┌─────────────────────────────────────┐
│  创作                          max-w-4xl │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 选择模型                      │    │
│  │ [DeepSeek ▼]                 │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌──────────┬──────────┬──────────┐ │
│  │ 📰 日报   │ 🔬 深度   │ 🎬 视频  │ │
│  │ 模式     │ 研究      │ 分析     │ │
│  │ 自动搜索  │ 特定主题  │ YouTube  │ │
│  │ AI动态   │ 深度分析  │ 内容解读  │ │
│  └──────────┴──────────┴──────────┘ │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 关注方向（可选）/ 主题 / URL  │    │
│  │ [输入框，根据模式变化]         │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         开始生成              │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ ⟳ 正在生成文章... 20%        │    │
│  │ ████████░░░░░░░░░░░░░░░░░░  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 文章标题        [复制] [打开] │    │
│  ├─────────────────────────────┤    │
│  │ 封面图（如有）                │    │
│  ├─────────────────────────────┤    │
│  │                             │    │
│  │ 文章 HTML 预览               │    │
│  │ (DOMPurify 消毒后渲染)       │    │
│  │ max-h: 600px, 可滚动        │    │
│  │                             │    │
│  └─────────────────────────────┘    │
└─────────────────────────────────────┘
```

交互流程：
1. 选择模型提供商（下拉框）
2. 选择创作模式（三选一卡片）
3. 根据模式填写参数
4. 点击"开始生成"（未配置 Key 时提示去配置页）
5. 显示进度条和阶段文字
6. 完成后显示文章预览，可复制 HTML 或在浏览器打开

---

## 页面三：模型配置 (Models)

```
┌─────────────────────────────────────────┐
│  模型配置                          max-w-5xl │
│  配置至少一个大模型的 API Key 即可开始使用    │
│                                         │
│  大语言模型                               │
│  ┌──────────────────┬──────────────────┐ │
│  │ DeepSeek    🟢   │ 智谱 GLM    ⚪   │ │
│  │ 深度求索         │ 清华智谱          │ │
│  │                  │                  │ │
│  │ API Key          │ API Key          │ │
│  │ [sk-***] [显示]  │ [输入...]  [显示] │ │
│  │ 模型             │ 模型             │ │
│  │ [deepseek-chat]  │ [glm-4-flash]   │ │
│  │                  │                  │ │
│  │ 如何获取 Key →   │ 如何获取 Key →   │ │
│  └──────────────────┴──────────────────┘ │
│  ┌──────────────────┬──────────────────┐ │
│  │ 豆包 (火山)  ⚪  │ Kimi (月之暗面) ⚪│ │
│  │ ...              │ ...              │ │
│  └──────────────────┴──────────────────┘ │
│  ┌──────────────────┐                    │
│  │ OpenAI       ⚪  │                    │
│  │ ...              │                    │
│  └──────────────────┘                    │
│                                         │
│  搜索服务                                │
│  ┌──────────────────┬──────────────────┐ │
│  │ Tavily Search    │ Exa Search       │ │
│  │ ...              │ ...              │ │
│  └──────────────────┴──────────────────┘ │
└─────────────────────────────────────────┘
```

每个模型卡片包含：
- 模型名称 + 状态指示器（🟢已配置 / ⚪未配置）
- 简短描述
- API Endpoint（大模型才有）
- 配置项输入框（Key 可切换显示/隐藏）
- "如何获取 Key →" 链接打开帮助弹窗

帮助弹窗 (HelpModal)：
```
┌─────────────────────────────────┐
│ DeepSeek - 获取 API Key      ✕  │
├─────────────────────────────────┤
│ 注册地址                         │
│ https://platform.deepseek.com   │
│                                 │
│ 操作步骤                         │
│ 1. 访问注册账号                   │
│ 2. 进入控制台 → API Keys         │
│ 3. 点击创建，复制保存              │
│                                 │
│ ┌─────────────────────────────┐ │
│ │ 免费额度：新用户赠送500万tokens│ │
│ └─────────────────────────────┘ │
│                                 │
│ 常见问题                         │
│ Q: Key 提示无效？                │
│ A: 检查是否复制完整              │
│                                 │
│          [ 关闭 ]               │
└─────────────────────────────────┘
```

---

## 页面四：文章管理 (Articles)

```
┌──────────────────────────────────────────────────┐
│  文章管理                    共 5 篇  [刷新]      │
│                                                  │
│  [搜索文章标题...]                                │
│                                                  │
│  ┌────────────┬────────────┬────────────┐ ┌────┐ │
│  │ 📄          │ 📄          │ 📄          │ │操作│ │
│  │ (封面/渐变)  │ (封面/渐变)  │ (封面/渐变)  │ │面板│ │
│  │             │             │             │ │    │ │
│  │ AI Agent    │ DeepSeek V3 │ Sora 视频   │ │标题│ │
│  │ 技术前沿    │ 深度评测     │ 技术解析    │ │日期│ │
│  │             │             │             │ │    │ │
│  │ 2026-02-16  │ 2026-02-15  │ 2026-02-14  │ │[预览]│
│  │ 已生成 日报  │ 已发布 深度  │ 已生成 视频  │ │[复制]│
│  └────────────┴────────────┴────────────┘ │[文件夹]│
│  ┌────────────┬────────────┐              │[删除]│
│  │ RAG 架构   │ 本周 AI     │              │    │ │
│  │ 最佳实践   │ 要闻速览    │              └────┘ │
│  └────────────┴────────────┘                     │
└──────────────────────────────────────────────────┘
```

- 文章卡片网格布局（1-3列响应式）
- 每张卡片：封面图（或渐变占位）、标题、日期、状态徽章、模式徽章
- 点击卡片右侧弹出操作面板（sticky）
- 操作：预览（浏览器打开）、复制 HTML、打开文件夹、删除（二次确认）
- 支持标题搜索过滤
- 数据来源：sidecar list_articles 扫描 output 目录

---

## 页面五：设置 (Settings)

```
┌─────────────────────────────────┐
│  设置                     max-w-3xl │
│                                 │
│  ┌─────────────────────────────┐│
│  │ 基本设置                     ││
│  │                             ││
│  │ 默认作者名                   ││
│  │ [AI爱好者]                  ││
│  │                             ││
│  │ 输出目录                     ││
│  │ [~/质取AI/articles]         ││
│  └─────────────────────────────┘│
│                                 │
│  ┌─────────────────────────────┐│
│  │ 微信公众号配置                ││
│  │ 配置后可将文章发布到公众号     ││
│  │                             ││
│  │ AppID                       ││
│  │ [wx...]                     ││
│  │                             ││
│  │ AppSecret                   ││
│  │ [●●●●●●●●]                 ││
│  │                             ││
│  │ [测试连接]                   ││
│  │ 连接成功 ✓                   ││
│  └─────────────────────────────┘│
└─────────────────────────────────┘
```

---

## 数据流

```
用户操作 → React 组件 → invoke("run_sidecar") → Rust sidecar.rs
    → spawn python-sidecar → stdin JSON → Python sidecar_main.py
    → stdout JSON Lines → Rust 解析 → emit("sidecar-event")
    → React listen → 更新 UI

配置存储：React Context → localStorage (全局共享)
```
