# 质取AI知识创作工具 — 项目进度总结

> 更新日期：2026-02-16

---

## 一、产品概况

**产品定位：** 跨平台桌面 AI 知识创作工具，面向自媒体运营者、企业内容团队、个人知识工作者。用户自带大模型 API Key，买断制售卖。

**技术栈：** Tauri 2.0 + React 19 + TypeScript + TailwindCSS 4（前端）| Rust（桌面壳）| Python 3.11+ Sidecar（AI 后端）

**代码仓库：** https://gitee.com/guda/report.git（main 分支）

---

## 二、产品功能完成度

### 2.1 核心功能

| 功能模块 | 设计要求 | 实现状态 | 备注 |
|---------|---------|---------|------|
| 文章创作 — 深度研究 | 输入主题关键词，AI 搜索+撰写 | ✅ 已完成 | 支持 WebSearch + WebFetch |
| 文章创作 — 日报模式 | 自动/手动选题，行业日报 | ✅ 已完成 | 支持输入行业/主题 |
| 文章创作 — 视频分析 | 粘贴视频链接生成文章 | ✅ 已完成 | 支持 YouTube/Bilibili 等 |
| 实时进度展示 | JSON Lines 事件流 → 前端进度条 | ✅ 已完成 | 含日志面板 |
| 文章预览 | HTML 渲染 + 封面图 | ✅ 已完成 | DOMPurify 安全渲染 |
| 复制 HTML | 一键复制到剪贴板 | ✅ 已完成 | 视觉反馈替代 alert |
| 在浏览器中打开 | 外部浏览器预览 | ✅ 已完成 | Tauri opener 插件 |
| 模型配置 | 5 个模型 + 2 个搜索服务 | ✅ 已完成 | 含注册引导文档 |
| 文章管理 | 历史列表、预览、删除 | ✅ 已完成 | 元数据 JSON 存储 |
| 微信发布 | AppID/Secret 配置，发布草稿 | ✅ 已完成 | Settings 页集成 |
| 文件上传分析 | Excel/PDF/Word 提取文本 | ✅ 已完成 | 超出原计划 |
| 文章头尾模板 | 自定义 header/footer，AI 渲染 | ✅ 已完成 | 超出原计划 |
| 提示词可配置 | ~/质取AI/prompts/ 用户自定义 | ✅ 已完成 | 优先用户目录 |

### 2.2 未实现功能

| 功能 | 优先级 | 说明 |
|------|-------|------|
| Dashboard 首页 | 低 | 当前为占位页，可加统计/快捷操作 |
| 授权验证（激活码） | 中 | 产品设计中提到，未实现 |
| 自动更新 | 中 | 需 Tauri updater 插件 |
| 深色模式 | 低 | 设计规范已定义，前端未实现切换 |
| Windows 打包 | 中 | 需 Windows 环境构建 msi |
| API Key 加密存储 | 中 | 当前用 localStorage，设计要求 keychain |

---

## 三、技术架构

### 3.1 项目结构

```
weixin/
├── app/                              # Tauri 桌面应用
│   ├── src/                          # React 前端
│   │   ├── pages/          (5)       # Create, Models, Articles, Settings, Dashboard
│   │   ├── components/     (12)      # ModeSelector, GenerateProgress, ArticlePreview,
│   │   │                             # ArticleList, ArticleActions, ArticleTemplates,
│   │   │                             # FileUpload, ModelCard, HelpModal, WechatConfig,
│   │   │                             # ModeSelector, MainLayout
│   │   ├── hooks/          (2)       # useConfig, useGenerate
│   │   ├── data/           (1)       # model-guides.ts
│   │   └── layouts/        (1)       # MainLayout
│   ├── src-tauri/                    # Rust 后端
│   │   ├── src/sidecar.rs            # run_sidecar + write_temp_html 命令
│   │   ├── src/lib.rs                # 插件注册（shell, opener, dialog）
│   │   └── capabilities/default.json # 权限配置
│   └── package.json
├── scripts/                          # Python Sidecar
│   ├── sidecar_main.py      (493行)  # 入口，10 个 action handler
│   ├── daily_ai_news.py              # 核心生成逻辑
│   ├── llm_adapter.py                # 6 模型适配层
│   ├── search_adapter.py             # Tavily/SerpAPI 搜索
│   ├── image_processor.py            # 图片处理
│   ├── video_analyzer.py             # 视频分析
│   └── build_sidecar.py              # PyInstaller 打包脚本
├── prompts/                          # 3 个提示词模板
├── build/                            # PyInstaller 构建产物
└── docs/                             # 设计文档
```

### 3.2 前后端通信

```
前端 React  →  invoke("run_sidecar", {commandJson})  →  Rust sidecar.rs
                                                           ↓
                                                     spawn python-sidecar
                                                     stdin: JSON 命令
                                                     stdout: JSON Lines 事件
                                                           ↓
Rust 逐行解析  →  emit("sidecar-event", event)  →  前端 listen("sidecar-event")
```

### 3.3 Sidecar 支持的 Action

| Action | 功能 | 调用方 |
|--------|------|-------|
| `generate` | 文章生成（日报/深度/视频） | Create 页 |
| `validate_key` | API Key 验证 | Models 页 |
| `list_articles` | 文章列表 | Articles 页 |
| `read_file` | 读取文件内容 | ArticlePreview |
| `delete_article` | 删除文章 | ArticleActions |
| `extract_files` | 提取 Excel/PDF/Word 文本 | FileUpload |
| `render_template` | AI 渲染 HTML 模板 | ArticleTemplates |
| `get_config` / `save_config` | 配置读写 | Settings |

### 3.4 支持的 AI 模型

| 模型 | 接口协议 | 状态 |
|------|---------|------|
| DeepSeek | OpenAI 兼容 | ✅ |
| 智谱 GLM | OpenAI 兼容 | ✅ |
| 豆包（火山引擎） | OpenAI 兼容 | ✅ |
| Kimi（月之暗面） | OpenAI 兼容 | ✅ |
| OpenAI | 原生 | ✅ |
| Claude | Claude CLI | ✅ |

### 3.5 依赖清单

**前端：** React 19, react-router-dom 7, dompurify 3, @tauri-apps/api 2, plugin-dialog, plugin-opener

**Rust：** tauri 2, tauri-plugin-shell 2, tauri-plugin-opener 2, tauri-plugin-dialog 2, serde, serde_json

**Python：** Pillow, requests, openpyxl, pdfplumber, python-docx, PyInstaller

---

## 四、视觉设计规范执行情况

### 4.1 设计哲学

| 原则 | 要求 | 执行状态 |
|------|------|---------|
| 黑白为本 | 全界面只用黑白灰，不引入彩色 | ✅ 全组件已适配 |
| 通透轻盈 | 接近纯白背景、阴影代替边框 | ✅ shadow-sm/md 替代 border |
| 护眼优先 | 不用纯黑，文字深灰 | ✅ oklch(0.15 0.005 265) |
| 聚焦文字 | 无边框、用阴影分层、少装饰 | ✅ |
| 呼吸感 | 大量留白，宽松行高 | ✅ |

### 4.2 颜色系统（OKLCH）

| 用途 | 规范值 | 实际使用 |
|------|-------|---------|
| 页面背景 | oklch(0.99 0 0) | ✅ |
| 卡片背景 | oklch(1 0 0) | ✅ |
| 主色（按钮） | oklch(0.27 0.005 265) | ✅ |
| 次要背景 | oklch(0.965 0 0) | ✅ |
| 辅助文本 | oklch(0.50 0 0) | ✅ |
| 边框 | oklch(0.91~0.93 0 0) | ✅ |
| 危险色 | oklch(0.63 0.14 52) | ✅ 仅删除按钮 |
| 禁用状态 | opacity: 0.4 | ✅ |

### 4.3 组件规范

| 组件 | 规范 | 执行 |
|------|------|------|
| Button | 36px 高，圆角 10px，深炭灰主色 | ✅ |
| Input | 36px 高，1px 边框，oklch 色值 | ✅ |
| Card | 无边框，shadow-sm，圆角 14px | ✅ |
| Sidebar | 220px 宽，接近白色背景 | ✅ |
| Badge | 灰度配色，pill 圆角 | ✅ |
| 过渡动画 | 150ms，仅 background-color/opacity | ✅ |

### 4.4 待完善

- 深色主题：设计规范已定义完整的深色色值，前端未实现切换
- Geist 字体：规范要求 Geist Sans/Mono，当前使用系统字体
- 焦点环样式：规范要求 2px ring，部分组件未添加

---

## 五、Git 提交历史

```
bafe157 feat: UI 全面升级 + Bug 修复 + 文章模板功能
4e59be4 feat: 创作页支持上传 Excel/PDF/Word 文件做数据分析
5e3785a feat: 文章删除功能 - sidecar 端删除文件 + 前端联动
a0df10b fix: 代码审查修复 - 安全加固、功能修复、架构改进
35d252c feat: Tauri 应用打包配置 - macOS dmg + app bundle
f7b1308 feat: PyInstaller sidecar 打包脚本
50f93c0 feat: sidecar 完整实现 - 生成、验证、文章管理、配置读写
67d8b01 feat: 微信公众号发布配置与设置页
430e166 feat: 文章管理页 - 历史文章列表与操作
3309409 feat: 文章创作页 - 三种模式选择、实时进度、文章预览
1dc8344 feat: Tauri Rust 端 sidecar 集成，支持 JSON Lines 事件流
1e45892 feat: 模型配置页 - 支持 5 个模型的 Key 配置与注册引导
322250e feat: 前端路由与侧边栏布局框架
e537be2 feat: llm_adapter 新增智谱GLM、豆包、Kimi 模型支持
2c80e84 feat: 添加 sidecar 入口脚本，支持 JSON Lines 通信协议
ab4511e feat: 初始化 Tauri 2.0 + React + TypeScript 项目脚手架
b768dc5 docs: 质取AI知识创作工具实施计划（12 个 Task）
5c243db docs: 质取AI知识创作工具产品设计文档
```

---

## 六、总体完成度

| 阶段 | 任务数 | 完成 | 完成度 |
|------|-------|------|-------|
| Phase 1: 基础架构 | 3 | 3 | 100% |
| Phase 2: 前端 UI | 4 | 4 | 100% |
| Phase 3: 后端扩展 | 2 | 2 | 100% |
| Phase 4: 打包分发 | 3 | 2.5 | 83% |
| **合计** | **12** | **11.5** | **96%** |

额外完成了 4 个计划外功能：文件上传分析、文章模板系统、文章删除、提示词可配置。

---

## 七、后续建议

**高优先级**
1. 端到端测试：完整走通 创作 → 预览 → 复制/发布 流程
2. API Key 加密存储（macOS Keychain / Windows Credential Manager）
3. Windows 平台打包测试

**中优先级**
4. Dashboard 首页内容（统计、快捷操作、最近文章）
5. 深色模式实现
6. 自动更新功能（Tauri updater）
7. 授权验证系统

**低优先级**
8. Geist 字体集成
9. 焦点环无障碍优化
10. 性能优化（大文件、长文章）
